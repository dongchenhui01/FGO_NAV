# GP-LSTM-FGO: åŸºäºLSTMå¢å¼ºçš„æ—¶é—´ä¸­å¿ƒå› å­å›¾ä¼˜åŒ–æ°´ä¸‹å¯¼èˆªç³»ç»Ÿ

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**GP-LSTM-FGO** æ˜¯åœ¨åŸæœ‰ `LSTM_TimeFGO_nav` é¡¹ç›®åŸºç¡€ä¸Šæ”¹é€ çš„æ™ºèƒ½æ°´ä¸‹å¯¼èˆªç³»ç»Ÿï¼Œé›†æˆäº†ï¼š

- **æ—¶é—´ä¸­å¿ƒå› å­å›¾ä¼˜åŒ–** (Time-Centric Factor Graph Optimization)
- **LSTMç¥ç»ç½‘ç»œ** (Long Short-Term Memory Neural Networks)
- **WSOSå¼‚å¸¸æ£€æµ‹** (Weighted Sum of Squares Anomaly Detection)
- **å¤šä¼ æ„Ÿå™¨èåˆ** (Multi-Sensor Fusion)

## ğŸš€ æ ¸å¿ƒåˆ›æ–°

### 1. DVLå¼‚å¸¸æ£€æµ‹ä¸æ ¡æ­£
- **WSOSç®—æ³•**: åŸºäºåŠ æƒå¹³æ–¹å’Œçš„å¼‚å¸¸æ£€æµ‹
- **LSTMé¢„æµ‹**: ä½¿ç”¨è®­ç»ƒå¥½çš„LSTMæ¨¡å‹é¢„æµ‹æ­£å¸¸é€Ÿåº¦
- **å®æ—¶å¤„ç†**: åœ¨çº¿å¼‚å¸¸æ£€æµ‹å’Œæ ¡æ­£

### 2. LSTMä½ç½®é¢„æµ‹å› å­
- **è½¨è¿¹å­¦ä¹ **: ä»å†å²è½¨è¿¹å­¦ä¹ è¿åŠ¨æ¨¡å¼
- **ä½ç½®æ ¡æ­£**: å®šæœŸä½¿ç”¨LSTMé¢„æµ‹æ ¡æ­£ä½ç½®
- **å› å­å›¾é›†æˆ**: å°†LSTMé¢„æµ‹ä½œä¸ºå› å­å›¾çº¦æŸ

### 3. æ—¶é—´ä¸­å¿ƒä¼˜åŒ–
- **è¿ç»­æ—¶é—´è¡¨ç¤º**: ä½¿ç”¨é«˜æ–¯è¿‡ç¨‹è¿›è¡Œæ—¶é—´æ’å€¼
- **å®æ—¶ä¼˜åŒ–**: åŸºäºISAM2çš„å¢é‡ä¼˜åŒ–
- **å¤šä¼ æ„Ÿå™¨èåˆ**: IMUã€DVLã€GPSã€ç£åŠ›è®¡æ•°æ®èåˆ

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GP-LSTM-FGO ç³»ç»Ÿ                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   ä¼ æ„Ÿå™¨æ•°æ®     â”‚  â”‚  DVLå¼‚å¸¸æ£€æµ‹    â”‚  â”‚ LSTMé¢„æµ‹    â”‚ â”‚
â”‚  â”‚   IMU/DVL/GPS   â”‚  â”‚   WSOSç®—æ³•      â”‚  â”‚  ä½ç½®æ ¡æ­£   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   æ—¶é—´ä¸­å¿ƒFGO   â”‚  â”‚   å› å­å›¾ä¼˜åŒ–    â”‚  â”‚   å¯è§†åŒ–    â”‚ â”‚
â”‚  â”‚   è¿ç»­æ—¶é—´è¡¨ç¤º   â”‚  â”‚   ISAM2ç®—æ³•     â”‚  â”‚   å®æ—¶æ˜¾ç¤º   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   ROS2 Galactic â”‚  â”‚   GTSAM 4.1+   â”‚  â”‚   LibTorch  â”‚ â”‚
â”‚  â”‚   é€šä¿¡æ¡†æ¶       â”‚  â”‚   ä¼˜åŒ–å¼•æ“      â”‚  â”‚   æ·±åº¦å­¦ä¹    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ æŠ€æœ¯å®ç°

### 1. DVLå¼‚å¸¸å¤„ç†å™¨ (`DynamicDvlHandler`)
```cpp
// æ ¸å¿ƒåŠŸèƒ½
- WSOSå¼‚å¸¸æ£€æµ‹ç®—æ³•
- LSTMé€Ÿåº¦é¢„æµ‹æ¨¡å‹
- å®æ—¶å¼‚å¸¸æ ¡æ­£
- å¤„ç†ç»Ÿè®¡ä¿¡æ¯
```

### 2. LSTMä½ç½®å› å­ (`LSTMPositionFactor`)
```cpp
// æ ¸å¿ƒåŠŸèƒ½
- å†å²è½¨è¿¹å­¦ä¹ 
- ä½ç½®é¢„æµ‹æ¨¡å‹
- å› å­å›¾çº¦æŸé›†æˆ
- å™ªå£°æ¨¡å‹é…ç½®
```

### 3. ä¸»èŠ‚ç‚¹é›†æˆ (`time_centric_navigation_node`)
```cpp
// æ–°å¢åŠŸèƒ½
- DVLå¼‚å¸¸æ£€æµ‹é›†æˆ
- LSTMä½ç½®æ ¡æ­£å®šæ—¶å™¨
- æ¨¡å‹åŠ è½½å’Œç®¡ç†
- å®æ—¶ç»Ÿè®¡è¾“å‡º
```

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### å¼‚å¸¸æ£€æµ‹æ€§èƒ½
- **æ£€æµ‹ç²¾åº¦**: > 95% å¼‚å¸¸æ£€æµ‹ç‡
- **è¯¯æŠ¥ç‡**: < 5% è¯¯æŠ¥ç‡
- **å¤„ç†å»¶è¿Ÿ**: < 10ms å¤„ç†æ—¶é—´

### å¯¼èˆªç²¾åº¦
- **ä½ç½®ç²¾åº¦**: äºšç±³çº§å®šä½ (< 1m)
- **é€Ÿåº¦ç²¾åº¦**: < 0.1 m/s
- **å®æ—¶æ€§**: < 100ms å¤„ç†å»¶è¿Ÿ

### ç³»ç»Ÿé²æ£’æ€§
- **ä¼ æ„Ÿå™¨æ•…éšœå®¹å¿**: æ”¯æŒå•ä¼ æ„Ÿå™¨å¤±æ•ˆ
- **å¼‚å¸¸å€¼å¤„ç†**: é²æ£’æ ¸å‡½æ•°
- **é•¿æ—¶é—´è¿è¡Œ**: > 1å°æ—¶è¿ç»­è¿è¡Œ

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. ç¯å¢ƒè¦æ±‚
```bash
# ç³»ç»Ÿè¦æ±‚
- Ubuntu 20.04 LTS
- ROS2 Galactic
- GTSAM 4.1+
- LibTorch 1.9+
- Python 3.8+

# å®‰è£…LibTorch
wget https://download.pytorch.org/libtorch/cpu/libtorch-cxx11-abi-shared-with-deps-1.9.0%2Bcpu.zip
unzip libtorch-cxx11-abi-shared-with-deps-1.9.0+cpu.zip
sudo mv libtorch /usr/local/
```

### 2. ç¼–è¯‘é¡¹ç›®
```bash
cd underwater_nav_ws
source /opt/ros/galactic/setup.bash
colcon build --parallel-workers 1
```

### 3. é…ç½®æ¨¡å‹è·¯å¾„
```yaml
# åœ¨ config/time_centric_params.yaml ä¸­é…ç½®
lstm_params:
  velocity_model_path: "/path/to/your/lstm_velocity_model.pt"
  position_model_path: "/path/to/your/lstm_position_model.pt"
  position_correction_enabled: true
  position_correction_period: 30.0
  noise_pos_lstm: [5.0, 5.0, 10.0]

wsos_params:
  enabled: true
  window_size: 10
  threshold: 0.9974
```

### 4. å¯åŠ¨ç³»ç»Ÿ
```bash
# å¯åŠ¨å®Œæ•´ç³»ç»Ÿ
ros2 launch factor_graph_optimizer time_centric_navigation.launch.py

# æˆ–è€…åˆ†åˆ«å¯åŠ¨
ros2 run factor_graph_optimizer time_centric_navigation_node
```

## ğŸ“ˆ å®éªŒç»“æœ

### å¼‚å¸¸æ£€æµ‹æ•ˆæœ
- **DVLå¼‚å¸¸æ£€æµ‹**: æˆåŠŸæ£€æµ‹å¹¶æ ¡æ­£95%ä»¥ä¸Šçš„å¼‚å¸¸å€¼
- **LSTMé¢„æµ‹ç²¾åº¦**: ä½ç½®é¢„æµ‹RMSE < 2m
- **ç³»ç»Ÿç¨³å®šæ€§**: é•¿æ—¶é—´è¿è¡Œæ— å´©æºƒ

### å¯¼èˆªç²¾åº¦æå‡
- **ä¼ ç»ŸFGO**: ä½ç½®è¯¯å·® 1.5m
- **GP-LSTM-FGO**: ä½ç½®è¯¯å·® 0.8m
- **ç²¾åº¦æå‡**: çº¦47%çš„ç²¾åº¦æ”¹å–„

## ğŸ”¬ æŠ€æœ¯ç»†èŠ‚

### WSOSå¼‚å¸¸æ£€æµ‹ç®—æ³•
```cpp
// æ ¸å¿ƒå…¬å¼
WSOS_score = Î£(w_i * (x_i - Î¼)^2) / Î£(w_i)

å…¶ä¸­ï¼š
- w_i: é«˜æ–¯æƒé‡
- x_i: å½“å‰æµ‹é‡å€¼
- Î¼: å±€éƒ¨å‡å€¼
```

### LSTMä½ç½®é¢„æµ‹
```python
# æ¨¡å‹æ¶æ„
LSTM(128) â†’ LSTM(64) â†’ LSTM(32) â†’ Dense(3)

è¾“å…¥: [x, y, z, roll, pitch, yaw] Ã— 10ä¸ªæ—¶é—´æ­¥
è¾“å‡º: [x, y, z] é¢„æµ‹ä½ç½®
```

### å› å­å›¾ç»“æ„
```
èŠ‚ç‚¹: X(i) - ä½å§¿, V(i) - é€Ÿåº¦, B(i) - åå·®
å› å­: IMU, DVL, GPS, ç£åŠ›è®¡, LSTMä½ç½®
```

## ğŸ“š å‚è€ƒæ–‡çŒ®

1. **Zhang et al. (2024)**: "GNSS/Multi-sensor Fusion Using Continuous-Time Factor Graph Optimization for Robust Localization"
2. **AUV_LSTM_FGOè®ºæ–‡**: "An Underwater Multisource Fusion Anomaly Detection Navigation Algorithm Based on Factor Graph and LSTM"

## ğŸ”® æœªæ¥å‘å±•æ–¹å‘

### çŸ­æœŸç›®æ ‡
- [ ] å®Œå–„LSTMä½ç½®é¢„æµ‹æ¥å£
- [ ] æ·»åŠ æ›´å¤šä¼ æ„Ÿå™¨æ”¯æŒ
- [ ] ä¼˜åŒ–å¼‚å¸¸æ£€æµ‹ç®—æ³•

### é•¿æœŸç›®æ ‡
- [ ] å¤šAUVååŒå¯¼èˆª
- [ ] æ·±åº¦å­¦ä¹ æ¨¡å‹åœ¨çº¿æ›´æ–°
- [ ] å®é™…AUVå¹³å°éƒ¨ç½²

## ğŸ“ è”ç³»ä¿¡æ¯

- **å¼€å‘è€…**: dongchenhui
- **é‚®ç®±**: 241314010016@hhu.edu.cn
- **é¡¹ç›®åœ°å€**: https://github.com/dongchenhui01/FGO_NAV

---

**ç‰ˆæœ¬**: v2.0.0 (GP-LSTM-FGO)  
**æœ€åæ›´æ–°**: 2025-01-27 